global
    maxconn 1000  # Much higher limit
    log stdout format raw local0 info
    nbthread 4  # Use multiple CPU threads

defaults
    mode tcp
    timeout connect 10s
    timeout client 1h      # Long timeout for idle connections
    timeout server 1h      # Long timeout for database queries
    timeout check 5s
    log global
    option tcplog

frontend mysql_front
    bind *:3306
    default_backend mysql_back
    maxconn 500  # Frontend-specific limit

backend mysql_back
    balance leastconn  # Better for database connections
    option tcp-check
    server db 192.168.1.2:3306 check maxconn 500 maxqueue 50
